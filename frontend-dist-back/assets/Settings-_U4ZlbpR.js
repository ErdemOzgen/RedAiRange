import{_ as S,r as u,c as a,o as s,w,a as o,v as b,t as r,b as c,F as k,d as M,e as _,f as d,g as P,h as g,i as y,T as C,j as D,u as L}from"./index-BYFWxVJT.js";const B={data(){return{show:!0,settings:{},settingsLoaded:!1}},computed:{currentPage(){let t=L().path.split("/"),e=t[t.length-1];return!e||e==="settings"?null:e},showSubMenu(){return this.$root.isMobile?!this.currentPage:!0},subMenus(){return{general:{title:this.$t("general")},appearance:{title:this.$t("Appearance")},security:{title:this.$t("Security")},about:{title:this.$t("About")}}}},watch:{"$root.isMobile"(){this.loadGeneralPage()}},mounted(){this.loadSettings(),this.loadGeneralPage()},methods:{loadGeneralPage(){!this.currentPage&&!this.$root.isMobile&&this.$router.push("/settings/appearance")},loadSettings(){this.$root.getSocket().emit("getSettings",t=>{this.settings=t.data,this.settings.checkUpdate===void 0&&(this.settings.checkUpdate=!0),this.settingsLoaded=!0})},saveSettings(t,e){let l=this.validateSettings();l.success?this.$root.getSocket().emit("setSettings",this.settings,e,h=>{this.$root.toastRes(h),this.loadSettings(),t&&t()}):this.$root.toastError(l.msg)},validateSettings(){return this.settings.keepDataPeriodDays<0?{success:!1,msg:this.$t("dataRetentionTimeError")}:{success:!0,msg:""}}}},E={class:"shadow-box shadow-box-settings"},N={class:"row"},T={key:0,class:"settings-menu col-lg-3 col-md-5"},V={class:"menu-item"},G={class:"menu-item"},R={class:"settings-content col-lg-9 col-md-7"},A={key:0,class:"settings-content-header"},F={class:"mx-3"};function I(t,e,l,h,p,i){const f=u("router-link"),v=u("font-awesome-icon"),$=u("router-view");return s(),a("div",null,[w(o("h1",{class:"mb-3"},r(t.$t("Settings")),513),[[b,p.show]]),o("div",E,[o("div",N,[i.showSubMenu?(s(),a("div",T,[(s(!0),a(k,null,M(i.subMenus,(n,m)=>(s(),_(f,{key:m,to:`/settings/${m}`},{default:d(()=>[o("div",V,r(n.title),1)]),_:2},1032,["to"]))),128)),t.$root.isMobile&&t.$root.loggedIn&&t.$root.socket.token!=="autoLogin"?(s(),a("a",{key:0,class:"logout",onClick:e[0]||(e[0]=P((...n)=>t.$root.logout&&t.$root.logout(...n),["prevent"]))},[o("div",G,[g(v,{icon:"sign-out-alt"}),y(" "+r(t.$t("Logout")),1)])])):c("",!0)])):c("",!0),o("div",R,[i.currentPage?(s(),a("div",A,r(i.subMenus[i.currentPage].title),1)):c("",!0),o("div",F,[g($,null,{default:d(({Component:n})=>[g(C,{name:"slide-fade",appear:""},{default:d(()=>[(s(),_(D(n)))]),_:2},1024)]),_:1})])])])])])}const j=S(B,[["render",I],["__scopeId","data-v-76b74c9b"]]);export{j as default};
